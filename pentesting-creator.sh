#!/bin/bash

# Prompt para solicitar el nombre de usuario
username=$(whiptail --inputbox "Ingrese el nombre de usuario para colocar la carpeta Pentesting en su escritorio:" 8 78 --title "Nombre de Usuario" 3>&1 1>&2 2>&3)

# Verifica si se ingresó el nombre de usuario
if [ -z "$username" ]; then
  whiptail --msgbox "No se ingresó ningún nombre de usuario. Saliendo..." 8 78 --title "Error"
  exit 1
fi

# Verificar si el usuario es root
if [ "$EUID" -ne 0 ]; then
  echo "Por favor, ejecute este script como root."
  exit 1
fi

desktop_dir="/home/$username/Desktop"
pentesting_dir="$desktop_dir/Pentesting"

# Querido desarrollador, mira esto
tools=(
  "metasploit-framework" "Metasploit Framework"
  "aircrack-ng" "Aircrack-ng"
  "wifite" "Wifite"
  "nmap" "Nmap"
  "wireshark" "Wireshark"
  "john" "John the Ripper"
  "hashcat" "Hashcat"
  "hydra" "Hydra"
  "burpsuite" "Burp Suite"
  "sqlmap" "SQLmap"
  "nikto" "Nikto"
  "netcat" "Netcat"
  "dnsenum" "Dnsenum"
  "tcpdump" "Tcpdump"
  "ettercap-graphical" "Ettercap"
  "hping3" "Hping3"
  "socat" "Socat"
  "powershell-empire" "Powershell Empire"
  "veil" "Veil"
  "maltego" "Maltego"
  "recon-ng" "Recon-ng"
  "beef-xss" "Beef"
  "zaproxy" "OWASP ZAP"
  "dirb" "Dirb"
  "enum4linux" "Enum4linux"
  "seclists" "Seclists"
  "gobuster" "Gobuster"
  "amass" "Amass"
  "wfuzz" "Wfuzz"
  "crackmapexec" "Crackmapexec"
  "smbclient" "Smbclient"
  "smbmap" "Smbmap"
  "sparta" "Sparta"
  "macchanger" "Macchanger"
  "kismet" "Kismet"
  "bettercap" "Bettercap"
  "exploitdb" "ExploitDB"
  "searchsploit" "Searchsploit"
  "theharvester" "TheHarvester"
  "evil-winrm" "Evil-WinRM"
  "snmpcheck" "Snmpcheck"
  "sslyze" "Sslyze"
  "sslscan" "Sslscan"
  "dsniff" "Dsniff"
  "arping" "Arping"
  "proxychains4" "Proxychains4"
  "exiftool" "Exiftool"
  "cadaver" "Cadaver"
  "cewl" "Cewl"
  "joomscan" "Joomscan"
  "dirbuster" "Dirbuster"
  "medusa" "Medusa"
  "patator" "Patator"
  "ncrack" "Ncrack"
  "dnsrecon" "Dnsrecon"
  "sublist3r" "Sublist3r"
  "masscan" "Masscan"
  "crunch" "Crunch"
  "acccheck" "Acccheck"
  "ace" "ACE"
  "ackCmd" "AckCmd"
  "admscout" "AdmScout"
  "admsnmp" "AdmSnmp"
  "aeskeyfind" "Aeskeyfind"
  "aesset" "Aesset"
  "afsctool" "Afsctool"
  "ag" "Ag"
  "agg" "Agg"
  "airserv-ng" "Airserv-ng"
  "aislerator" "Aislerator"
  "aisleriot" "Aisleriot"
  "amun" "Amun"
  "angryip" "Angry IP Scanner"
  "ant" "Ant"
  "apache-users" "Apache Users"
  "apktool" "Apktool"
  "apport-unpack" "Apport Unpack"
  "appscan" "Appscan"
  "apt-merge" "Apt Merge"
  "apt-dater" "Apt-dater"
  "apt-offline" "Apt-offline"
  "arachni" "Arachni"
  "arch" "Arch"
  "arpspoof" "Arpspoof"
  "arp-scan" "Arp-scan"
  "asleap" "Asleap"
  "asp-audit" "Asp-audit"
  "ass" "Ass"
  "ast" "Ast"
  "automater" "Automater"
  "axel" "Axel"
  "backdoor-factory" "Backdoor Factory"
  "bamf" "Bamf"
  "bandit" "Bandit"
  "barnyard2" "Barnyard2"
  "base64dump" "Base64dump"
  "bat" "Bat"
  "bbqsql" "Bbqsql"
  "bfbtester" "Bfbtester"
  "binwalk" "Binwalk"
  "blindelephant" "Blind Elephant"
  "blisqy" "Blisqy"
  "blocklist" "Blocklist"
  "bluelog" "Bluelog"
  "bluepot" "Bluepot"
  "bluesnarfer" "Bluesnarfer"
  "bmc" "Bmc"
  "bnm" "Bnm"
  "bob" "Bob"
  "boopsuite" "BoopSuite"
  "braa" "Braa"
  "brakeman" "Brakeman"
  "bsqlbf" "Bsqlbf"
  "bulk-extractor" "Bulk Extractor"
  "burb" "Burb"
  "burpsuite" "Burpsuite"
  
  # Pentesting SQL
  "sqlninja" "Sqlninja"
  "sqlsus" "Sqlsus"
  "sqldict" "Sqldict"
  "sqlcheck" "Sqlcheck"
  "sqlcipher" "Sqlcipher"
  "sqlyog" "Sqlyog"
  "sqliv" "Sqliv"
  "sqlbrute" "Sqlbrute"
  "sqlcrack" "Sqlcrack"
  "sqlping" "Sqlping"
  "sqlget" "Sqlget"
  "sqlsend" "Sqlsend"
  "sqlchop" "Sqlchop"
  "sqlsh" "Sqlsh"
  "sqlbot" "Sqlbot"
  "sqlitestudio" "SQLitestudio"
  "sqltrans" "Sqltrans"
  "sqlhunter" "Sqlhunter"
  "sqlfury" "Sqlfury"
  "sqltool" "Sqltool"
  
  # XSS and other categories
  "xss-sniper" "XSS Sniper"
  "xsscrapy" "XSScrapy"
  "xssploit" "XSSploit"
  "xsser" "XSSer"
  "xsstools" "XSS Tools"
  "xssscanner" "XSS Scanner"
  "xsstrike" "XSStrike"
  "xsspy" "XSSPy"
  "xsshunter" "XSS Hunter"
  "xssdetect" "XSS Detect"
  "xsshell" "XSShell"
  "xsscan" "XSScan"
  "xsspin" "XSSPin"
  "xsspoison" "XSSPoison"
  "xssrage" "XSSRage"
  "xssv" "XSSV"
  "xssbot" "XSSBot"
  "xsspredator" "XSSPredator"
  "xsswatch" "XSSWatch"
  "xssscanner" "XSSScanner"
)

install_tools() {
  apt update
  for tool in "$@"; do
    apt install -y "$tool"
  done
  echo "Instalación completada."
}

create_shortcuts() {
  mkdir -p "$pentesting_dir"

  # Crear subcarpetas para las herramientas
  mkdir -p "$pentesting_dir/Networking"
  mkdir -p "$pentesting_dir/Wireless"
  mkdir -p "$pentesting_dir/Password_Attacks"
  mkdir -p "$pentesting_dir/Exploitation"
  mkdir -p "$pentesting_dir/Reconnaissance"
  mkdir -p "$pentesting_dir/Web_Application"
  mkdir -p "$pentesting_dir/Bluetooth"
  mkdir -p "$pentesting_dir/DDoS"
  mkdir -p "$pentesting_dir/SQL"
  mkdir -p "$pentesting_dir/XSS"

  # Crear accesos directos (ejemplo)
  ln -s /usr/bin/sqlmap "$pentesting_dir/Web_Application/SQLMap"
  ln -s /usr/bin/nikto "$pentesting_dir/Web_Application/Nikto"
  ln -s /usr/bin/nmap "$pentesting_dir/Reconnaissance/Nmap"
  ln -s /usr/bin/aircrack-ng "$pentesting_dir/Wireless/Aircrack-ng"
  ln -s /usr/bin/john "$pentesting_dir/Password_Attacks/JohnTheRipper"
  ln -s /usr/bin/hydra "$pentesting_dir/Password_Attacks/Hydra"
}

# Instalar herramientas
install_tools "${tools[@]}"

# Crear accesos directos
create_shortcuts
