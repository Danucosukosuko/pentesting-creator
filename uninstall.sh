#!/bin/bash

# Prompt para solicitar el nombre de usuario
username=$(whiptail --inputbox "Ingrese el nombre de usuario para quitar la carpeta Pentesting de su escritorio:" 8 78 --title "Nombre de Usuario" 3>&1 1>&2 2>&3)

# Verifica si se ingresó el nombre de usuario
if [ -z "$username" ]; then
  whiptail --msgbox "No se ingresó ningún nombre de usuario. Saliendo..." 8 78 --title "Error"
  exit 1
fi

# Verificar si el usuario es root
if [ "$EUID" -ne 0 ]; then
  echo "Por favor, ejecute este script como root."
  exit 1
fi

desktop_dir="/home/$username/Desktop"
pentesting_dir="$desktop_dir/Pentesting"

# Herramientas para desinstalar
tools=(
  "metasploit-framework"
  "aircrack-ng"
  "wifite"
  "nmap"
  "wireshark"
  "john"
  "hashcat"
  "hydra"
  "burpsuite"
  "sqlmap"
  "nikto"
  "netcat"
  "dnsenum"
  "tcpdump"
  "ettercap-graphical"
  "hping3"
  "socat"
  "powershell-empire"
  "veil"
  "maltego"
  "recon-ng"
  "beef-xss"
  "zaproxy"
  "dirb"
  "enum4linux"
  "seclists"
  "gobuster"
  "amass"
  "wfuzz"
  "crackmapexec"
  "smbclient"
  "smbmap"
  "sparta"
  "macchanger"
  "kismet"
  "bettercap"
  "exploitdb"
  "searchsploit"
  "theharvester"
  "evil-winrm"
  "snmpcheck"
  "sslyze"
  "sslscan"
  "dsniff"
  "arping"
  "proxychains4"
  "exiftool"
  "cadaver"
  "cewl"
  "joomscan"
  "dirbuster"
  "medusa"
  "patator"
  "ncrack"
  "dnsrecon"
  "sublist3r"
  "masscan"
  "crunch"
  "acccheck"
  "ace"
  "ackCmd"
  "admscout"
  "admsnmp"
  "aeskeyfind"
  "aesset"
  "afsctool"
  "ag"
  "agg"
  "airserv-ng"
  "aislerator"
  "aisleriot"
  "amun"
  "angryip"
  "ant"
  "apache-users"
  "apktool"
  "apport-unpack"
  "appscan"
  "apt-merge"
  "apt-dater"
  "apt-offline"
  "arachni"
  "arch"
  "arpspoof"
  "arp-scan"
  "asleap"
  "asp-audit"
  "ass"
  "ast"
  "automater"
  "axel"
  "backdoor-factory"
  "bamf"
  "bandit"
  "barnyard2"
  "base64dump"
  "bat"
  "bbqsql"
  "bfbtester"
  "binwalk"
  "blindelephant"
  "blisqy"
  "blocklist"
  "bluelog"
  "bluepot"
  "bluesnarfer"
  "bmc"
  "bnm"
  "bob"
  "boopsuite"
  "braa"
  "brakeman"
  "bsqlbf"
  "bulk-extractor"
  "burb"
  "burpsuite"
  
  # Pentesting SQL
  "sqlninja"
  "sqlsus"
  "sqldict"
  "sqlcheck"
  "sqlcipher"
  "sqlyog"
  "sqliv"
  "sqlbrute"
  "sqlcrack"
  "sqlping"
  "sqlget"
  "sqlsend"
  "sqlchop"
  "sqlsh"
  "sqlbot"
  "sqlitestudio"
  "sqltrans"
  "sqlhunter"
  "sqlfury"
  "sqltool"
  
  # XSS and other categories
  "xss-sniper"
  "xsscrapy"
  "xssploit"
  "xsser"
  "xsstools"
  "xssscanner"
  "xsstrike"
  "xsspy"
  "xsshunter"
  "xssdetect"
  "xsshell"
  "xsscan"
  "xsspin"
  "xsspoison"
  "xssrage"
  "xssv"
  "xssbot"
  "xsspredator"
  "xsswatch"
  "xssscanner"
)

uninstall_tools() {
  apt update
  for tool in "$@"; do
    apt remove --purge -y "$tool"
  done
  echo "Desinstalación completada."
}

remove_shortcuts() {
  # Eliminar accesos directos y carpetas
  rm -rf "$pentesting_dir"
}

# Desinstalar herramientas
uninstall_tools "${tools[@]}"

# Eliminar accesos directos
remove_shortcuts
